---
title: "World Cup data analysis"
output: html_notebook
---

```{r}
source("WorldCup.R")
```

```{r}
setwd("./db")
countries <- read.csv2("teams.csv", sep = ',')
games <- read.csv2("games.csv", sep=',')

# Creates a human readabe data set
gamesId <- games$id
team1HumanReadable <- countries$title[games$team1_id]
team2HumanReadable <- countries$title[games$team2_id]

humanReadable <- data.frame(gamesId, team1HumanReadable, team2HumanReadable, games$score1, games$score2, games$winner, games$play_at, games$play_at_v2, games$play_at_v3)
humanReadable <- humanReadable[which(!is.na(humanReadable$games.winner)),]

# Come on, West Germany should be Germany!
humanReadable$team1HumanReadable <- gsub("West Germany \\(-1989\\)", "Germany", humanReadable$team1HumanReadable)
humanReadable$team2HumanReadable <- gsub("West Germany \\(-1989\\)", "Germany", humanReadable$team2HumanReadable)

# Let's create stats for all countries which have ever participated to the World Cup

# First let's get al participants
allParticipants <- getAllTimeParticipants(humanReadable)

# Builds stats for all the participants
stats <- data.frame()

for (i in 1:length(allParticipants)) {
    stats <- rbind(stats, getStats(humanReadable, allParticipants[i]))
}

```


# France

```{r}

print(stats[order(-stats$`Number of games played`),])

```